= _hl-dev-x-01_
Jonas Fierlings <https://github.com/PigeonF[@PigeonF]>;
// settings:
:experimental:
ifndef::env-github[:icons: font]
ifdef::env-github[]
:status:
:caution-caption: :fire:
:important-caption: :exclamation:
:note-caption: :paperclip:
:tip-caption: :bulb:
:warning-caption: :warning:
endif::[]
// URLs:
:url-inucs: https://linuxcontainers.org/incus/
:url-deploy-rs: https://github.com/serokell/deploy-rs

_hl-dev-x-01_ is a {url-incus}[incus] VM running on a x86_64 server.
Its purpose is to serve as a host used for development.

== Bootstrapping

In order to bootstrap the _hl-dev-x-01_, the host has to be able to run {url-inucs}[incus].
First build the relevant files needed to import the base image into {url-incus}[incus].
Afterwards, launch a new VM using the base image.

.Bootstrap the hl-dev-x-01 VM using {url-incus}[incus].
[source,console]
----
$ nix build 'github:PigeonF/homelab?ref=main#hl-dev-x-01-incus-files'
$ incus image import --alias homelab/hl-dev-x-01 ./result/tarball/nixos-image-*.tar.xz ./result/nixos.qcow2
$ incus launch homelab/hl-dev-x-01 hl-dev-x-01 --profile bridged -c boot.autostart=true
----

== Updating the Configuration

To update the configuration from a remote machine, you can use {url-deploy-rs}[`deploy-rs`].

.Update the NixOS configuration with {url-deploy-rs}[`deploy-rs`].
[source,console]
----
$ nix run nixpkgs#deploy-rs -- '.#hl-dev-x-01'
----
